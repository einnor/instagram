<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta content="IE=edge" http-equiv="X-UA-Compatible">
	<meta content="initial-scale=1.0, width=device-width" name="viewport">
	<title>Instagram | New Post</title>

	<!-- css -->
	<link href="css/base.min.css" rel="stylesheet">

	<!-- css for this project -->
	<link href="css/project.min.css" rel="stylesheet">
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/uploadfile.css" />
	<!-- favicon -->
	<!-- ... -->

	<!-- ie -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	<style type="text/css">
	.ajax-upload-dragdrop{width:100% !important;}
	</style>
</head>
<body class="avoid-fout page-brand">
	<div class="avoid-fout-indicator avoid-fout-indicator-fixed">
		<div class="progress-circular progress-circular-center progress-circular-brand">
			<div class="progress-circular-wrapper">
				<div class="progress-circular-inner">
					<div class="progress-circular-left">
						<div class="progress-circular-spinner"></div>
					</div>
					<div class="progress-circular-gap"></div>
					<div class="progress-circular-right">
						<div class="progress-circular-spinner"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<ul class="nav nav-list pull-left" style="color:#FFF;">
		<li>
			<a data-toggle="menu" href="#menu" style="color:#FFF;">
				<span class="icon icon-lg">menu</span>
			</a>
		</li>
	</ul>
	<a class="header-logo margin-left-no" style="font-weight:bold;margin-top:25px;color:#FFF;" href="./">Instagram</a>
	<ul class="nav nav-list pull-right">
		<li>
			<a data-toggle="menu" href="#profile">
				<span class="access-hide">John Smith</span>
				<span class="avatar"><img alt="alt text for John Smith avatar" src="images/users/avatar-001.jpg"></span>
			</a>
		</li>
	</ul>
	<nav aria-hidden="true" class="menu" id="menu" tabindex="-1">
		<div class="menu-scroll">
			<div class="menu-content">
				<a class="menu-logo" href="index.html">Instagram</a>
				<div class="form-group form-group-label form-group-brand">
					<div class="row">
						<div class="col-lg-10 col-lg-offset-1 col-sm-10 col-sm-offset-1">
							<label class="floating-label" for="search">Search <i class="fa fa-search"></i></label>
							<input class="form-control" id="search" name="search" type="text">
						</div>
					</div>
				</div>
			</div>
		</div>
	</nav>
	<nav aria-hidden="true" class="menu menu-right" id="profile" tabindex="-1">
		<div class="menu-scroll">
			<div class="menu-top">
				<div class="menu-top-img">
					<img alt="John Smith" src="images/samples/landscape.jpg">
				</div>
				<div class="menu-top-info">
					<a class="menu-top-user" href="javascript:void(0)"><span class="avatar pull-left"><img alt="alt text for John Smith avatar" src="images/users/avatar-001.jpg"></span>John Smith</a>
				</div>
				<div class="menu-top-info-sub">
					<small>Some additional information about John Smith</small>
				</div>
			</div>
			<div class="menu-content">
				<ul class="nav">
					<li>
						<a class="waves-attach" href="javascript:void(0)"><span class="icon icon-lg">account_box</span>Profile </a>
					</li>
					<li>
						<a class="waves-attach" href="post.html"><span class="icon icon-lg">add_to_photos</span>Upload Photo</a>
					</li>
					<li>
						<a class="waves-attach" href="login.html"><span class="icon icon-lg">exit_to_app</span>Logout</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>
	<div class="content">
		<div class="container">
			<div class="row">
				<div class="col-lg-4 col-lg-push-4 col-sm-6 col-sm-push-3">
					<section class="content-inner">
						<div class="card-wrap">
							<div class="card">
								<div class="card-main">
									<div class="card-header">
										<div class="card-inner">
											<h1 class="card-heading">New Post</h1>
										</div>
									</div>
									<div class="card-inner">
										<form class="form" method="post">
											<input type="hidden" id="m_method" value="POST">
											<input type="hidden" id="m_url" value="api/posts">
											<input type="hidden" id="size" name="size" value="">
											<input type="hidden" id="extension" name="extension" value="">
											<input type="hidden" id="orientation" name="orientation" value="">
											<input type="hidden" id="resolution" name="resolution" value="">
											<input type="hidden" id="dimensions" name="dimensions" value="">
											<fieldset>
												<div class="form-group form-group-brand">
													<div class="row">
														<div class="col-lg-12 col-sm-12">
															<div class="ttl9 ttl">Upload Image / Video</div>
														</div>
														<div class="col-lg-12 col-sm-12">
											                <input type="hidden" id="name" name="name" value="">
											                <div class="mypost"></div>
														</div>
													</div>
												</div>
												<div class="form-group form-group-brand">
												<div class="row">
													<div class="col-lg-12 col-sm-12">
														<div class="media">
															<div class="media-object pull-left">
																<label class="form-icon-label" for="caption"><span class="icon">comment</span></label>
															</div>
															<div class="media-inner">
																<textarea class="form-control textarea-autosize" id="caption" name="caption" placeholder="Enter caption..." rows="3"></textarea>
															</div>
														</div>
													</div>
												</div>
											</div>
											</fieldset>
											<div class="form-group-btn">
												<button class="btn btn-brand btn-block waves-attach waves-button waves-light" type="submit">post</button>
											</div>
										</form>
									</div>
								</div>
							</div>
						</div>
					</section>
				</div>
			</div>
		</div>
	</div>
	<footer class="footer">
		<div class="container">
			<p style="font-weight:bold;color:#DDD;">Instagram</p>
		</div>
	</footer>
	<!-- js -->
	<script src="js/jquery-1.11.3.min.js"></script>
	<script src="js/base.min.js"></script>

	<!-- js for this project -->
	<script src="js/project.min.js"></script>
	<script src="js/jquery.backstretch.min.js"></script>
    <script type="text/javascript" src="js/jquery.uploadfile.min.js"></script>
    <script type="text/javascript" src="js/extensions.js"></script>
    <script type="text/javascript" src="js/newcommon-login.js"></script>
	<script type="text/javascript">
		$('body').backstretch("images/snow.jpg");
		$(document).ready(function(e){
			var images = ['jpg','png','jpeg','gif'];
			var videos = ['mp4','ogg','wma','avi','mkv','ogv','wmv','3gp','mpg','mpeg','m2v']
			$('.ttl').uploadFile({
				url:"classes/postupload.php", fileName:"postfile", allowedTypes: "jpg,png,jpeg,mp4,ogg,wma,avi,mkv,ogv,gif,wmv,3gp,mpg,mpeg,m2v",showDelete:false, showDone:false,multiple:true,
				returnType:'json', showError:true, showProgress:true, showPreview:false, showStatusAfterSuccess:false, maxFileCount:1,
				/*previewWidth:200,*/formData: {"cat":"post"},
				onSuccess:function(files,data,xh,pd){
					console.log(data.imagetype);console.log(data.orientation)
					$('#name').val(data.filename);$('#size').val(data.size);$('#extension').val(data.imagetype);
					$('#orientation').val(data.orientation);$('#resolution').val(data.resolution);
					$('#dimensions').val(data.dimensions);
					if($.inArray(data.imagetype.replace('.','').toLowerCase(), images) !== -1){
						$('.mypost').append('<img style="width:100%;" class="img-responsive thumbnail" src="'+data.filename.replace('../','./')+'">');
					}
					if($.inArray(data.imagetype.replace('.','').toLowerCase(), videos) !== -1){
						$('.mypost').append('<img width="200px" class="img-responsive thumbnail" src="'+data.name.replace('../','./')+'">');
					}
				},
				onError: function(files,status,errMsg,pd){
					attachment="Error_on_upload"; pd.done.show();
					pd.done.click(function () {
						pd.statusbar.hide("slow");
						pd.statusbar.remove();
					});
					$('.ajax-file-upload-error').width('76%');
					$('.ajax-file-upload-statusbar').width('76%');
				},
			});
			$('form').on('submit',function(ev){
				ev.preventDefault();
				submitform($(this),function(data){
					if(data.response=="success"){
						window.location.href="./"
					}
				})
			})
		})
	</script>
</body>
</html>